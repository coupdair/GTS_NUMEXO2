##GTS server with EPICS+UDP interfaces

#edit
gitk --all &
gedit _info.txt gtsApp/src/gtsMain.cpp gtsApp/src/dbSubExample.c iocBoot/iocgts/st.cmd &

#clean DB
rm -fr iocBoot/iocgts db dbd

#compile
./make.sh
./bin/linux-x86_64/gts --help && ./bin/linux-x86_64/gts --version
./doxygen.sh
ls bin/*/gts Linux-*/gtsServer
cp -p /space/global/buildroot/CentOS6_64/ppc440/epics/base-3.15.5/bin/linux-ppc/caRepeater bin/linux-ppc/

#run PPC

##transfert
##pack
rm gts.zip ; zip -ry9 gts.zip db dbd ; zip -j gts.zip bin/linux-ppc/gts iocBoot/iocgts/st.cmd iocBoot/iocgts/envPaths bin/linux-ppc/caRepeater
rsync -var gts.zip   ganp477:/tmp/
rsync -var /tmp/gts.zip numexo2@numexo2-11:/tmp/
##base pack
cd /space/global/buildroot/CentOS6_64/ppc440/epics/base/
rm epics.zip ; zip -j epics.zip bin/linux-x86_64/caRepeater bin/linux-x86_64/caput bin/linux-x86_64/caget
rsync -var epics.zip ganp477:/tmp/

##embedded
###driver
#disable periodic message on standard output
echo 0 > /sys/module/rdp_fifo_driver/parameters/debug_level
###unpack
cd /tmp/
unzip -o gts.zip 
###server
./caRepeater &
./gts -e -c st.cmd
#var mySubDebug 0



./gts --epics -c st.cmd 

WARNING: OS Clock time was read before being set.
Using 1990-01-02 00:00:00.000000 UTC

exit
##UDP server

#compile
make

#get version (on host computer, else on target call "gtsServer -v")
strings Linux-ppc440/gtsServer | grep 'v.\..\..' > VERSION
###or
nt12 /usr/local/bin/gtsServer -v | tail -c 8 > VERSION

#documentation
./doxygen.sh

exit

#single CL
make && make -f Makefile.host ; strings Linux-ppc440/gtsServer | grep 'v.\..\..' > VERSION ; set VERSION=`cat VERSION` ; cat Doxyfile.template | sed "s/##VERSION##/$VERSION/" > Doxyfile ; ./Linux-x86-64/gtsServer -h > gtsServer.help.output ; doxygen ; firefox doc/html/index.html &

exit

#EPICS interface
/space/global/buildroot/CentOS6_64/ppc440/epics/base/bin/linux-x86_64/makeBaseApp.pl -t example gts
/space/global/buildroot/CentOS6_64/ppc440/epics/base/bin/linux-x86_64/makeBaseApp.pl -t example -i -a linux-x86_64 gts

